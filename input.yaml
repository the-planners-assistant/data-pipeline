# DSL Template generated for Site Analysis Report Generation

description: "Instructs an LLM to generate a comprehensive site analysis report for a UK planning officer, integrating site specifics, policy, geospatial constraints, and a proposal summary."
task_name: site_analysis_report_generation

variables:
  - name: location_description
    description: "Address or textual description of the site location."
  - name: geospatial_constraints
    description: "Description of known geospatial factors (e.g., Flood Zone 3, adjacent to Listed Building, Conservation Area)."
  - name: specific_policies
    description: "List of specific National, Regional, or Local Plan policy references."
  - name: planning_proposal_summary
    description: "A brief summary of the proposed development."

output_schema: # Defining the expected structured output explicitly
  type: object
  properties:
    site_summary:
      type: string
      description: "Overview of the site, its location, and immediate context."
    planning_history_notes:
      type: string
      description: "Brief notes on any known or inferred relevant planning history."
    policy_assessment:
      type: string
      description: "Analysis of how the site/proposal relates to provided policies and general UK planning principles."
    geospatial_analysis:
      type: string
      description: "Assessment of the implications of geospatial constraints."
    proposal_context_fit:
      type: string
      description: "Initial assessment of how the proposal fits the site's context, constraints, and policy."
    key_issues_opportunities:
      type: string
      description: "Bulleted list summarizing key planning issues, constraints, and opportunities."
    further_investigation_needed:
      type: string
      description: "Suggested areas needing further detailed investigation."

prompt_template: |
  You are an expert UK Planning Analyst AI. Your task is to generate a comprehensive site analysis report to assist a planning officer, based on the provided information and your extensive knowledge of the UK planning system. Maintain an objective and professional tone throughout.

  **Site & Proposal Information:**
  *   Location: {{ location_description }}
  *   Geospatial Constraints: {{ geospatial_constraints }}
  *   Specific Policies Provided: {{ specific_policies }}
  *   Planning Proposal Summary: {{ planning_proposal_summary }}

  **Analysis Instructions:**
  1.  **Synthesize Inputs:** Integrate the provided details with your general understanding of UK planning law, the NPPF, and common local planning considerations.
  2.  **Assess Policy:** Analyze the site and proposal against the `specific_policies` listed. Also consider broader relevant national/local policies (even if not listed) based on the site context and proposal type. Reference specific policy numbers/names where applicable.
  3.  **Evaluate Constraints:** Clearly explain how the `geospatial_constraints` impact the site's development potential and interact with the `planning_proposal_summary`.
  4.  **Structure Output:** Generate a report structured exactly as follows, providing concise analysis for each section. Output the report as a valid JSON object matching the defined schema.

  **Required Output Structure (JSON Object):**
  ```json
  {
    "site_summary": "Provide overview here...",
    "planning_history_notes": "Provide notes here (or state if none apparent)...",
    "policy_assessment": "Provide policy analysis here, referencing specific policies...",
    "geospatial_analysis": "Provide geospatial constraint analysis here...",
    "proposal_context_fit": "Provide assessment of proposal fit here...",
    "key_issues_opportunities": "Provide bulleted list of key issues/opportunities here...",
    "further_investigation_needed": "Suggest further checks here..."
  }